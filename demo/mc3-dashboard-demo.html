<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Claude Command Center (MC¬≥)</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(59, 130, 246, 0.5); }
            50% { box-shadow: 0 0 30px rgba(59, 130, 246, 0.8); }
        }
        .pulse-glow {
            animation: pulse-glow 2s ease-in-out infinite;
        }
        @keyframes slide-up {
            from { transform: translateY(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .slide-up {
            animation: slide-up 0.3s ease-out;
        }
        .fab {
            transition: all 0.3s ease;
        }
        .fab:hover {
            transform: scale(1.1);
        }
        .log-entry {
            animation: slide-up 0.2s ease-out;
        }
        .progress-bar {
            transition: width 0.5s ease;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100">
    <div id="root">
        <div style="display: flex; align-items: center; justify-content: center; min-height: 100vh; color: white;">
            <div style="text-align: center;">
                <div style="font-size: 3rem; margin-bottom: 1rem;">üéõÔ∏è</div>
                <div style="font-size: 1.5rem; font-weight: bold; margin-bottom: 0.5rem;">Multi-Claude Command Center</div>
                <div style="color: #9ca3af;">Loading...</div>
            </div>
        </div>
    </div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Mock Data
        const initialSessions = [
            {
                id: '1',
                name: 'WordPress Migration',
                status: 'running',
                taskType: 'migration',
                progress: 45,
                filesProcessed: 1247,
                totalFiles: 2847,
                startedAt: new Date(Date.now() - 720000),
                logs: [
                    { level: 'info', message: 'Starting migration process...', time: '12:45:32' },
                    { level: 'success', message: 'Connected to GridPane server', time: '12:45:33' },
                    { level: 'info', message: 'Analyzing site structure...', time: '12:45:35' },
                    { level: 'success', message: 'WordPress detected (v6.4.2)', time: '12:45:37' },
                ]
            },
            {
                id: '2',
                name: 'Dashboard Build',
                status: 'paused',
                taskType: 'build',
                progress: 0,
                startedAt: new Date(Date.now() - 180000),
                logs: [
                    { level: 'info', message: 'Initializing Next.js project...', time: '12:52:14' },
                    { level: 'warn', message: 'Waiting for approval...', time: '12:52:20' },
                ]
            },
            {
                id: '3',
                name: 'CF Worker Deploy',
                status: 'running',
                taskType: 'deploy',
                progress: 85,
                startedAt: new Date(Date.now() - 300000),
                logs: [
                    { level: 'info', message: 'Building Worker...', time: '12:50:45' },
                    { level: 'success', message: 'Build complete', time: '12:50:52' },
                    { level: 'info', message: 'Deploying to Cloudflare...', time: '12:50:53' },
                ]
            },
            {
                id: '4',
                name: 'Idle Worker',
                status: 'idle',
                taskType: null,
                progress: 0,
                logs: []
            }
        ];

        const initialApprovals = [
            {
                id: 'a1',
                sessionId: '2',
                sessionName: 'Dashboard Build',
                action: 'Execute npm install',
                command: 'npm install next@14 react@18 react-dom@18 @tanstack/react-query zustand',
                riskLevel: 'medium',
                context: {
                    reason: 'Installing dependencies for Next.js project',
                    impact: 'Will modify package.json and create node_modules',
                    filesAffected: 2,
                    estimatedTime: '2-3 minutes'
                }
            }
        ];

        const templates = [
            {
                id: 't1',
                name: 'WordPress Migration',
                icon: 'üì§',
                category: 'migration',
                description: 'Migrate WordPress site from GridPane to xCloud',
                fields: [
                    { name: 'sourceDomain', label: 'Source Domain', type: 'text', placeholder: 'client.com' },
                    { name: 'targetServer', label: 'Target Server', type: 'select', options: ['xCloud-1', 'xCloud-2'] },
                    { name: 'backupFirst', label: 'Create Backup First', type: 'checkbox', default: true },
                    { name: 'searchReplace', label: 'Search/Replace Domains', type: 'checkbox', default: true }
                ]
            },
            {
                id: 't2',
                name: 'Build & Deploy',
                icon: 'üèóÔ∏è',
                category: 'deployment',
                description: 'Build project and deploy to Vercel or Cloudflare',
                fields: [
                    { name: 'project', label: 'Project', type: 'select', options: ['mainwp-replacement', 'client-dashboard'] },
                    { name: 'target', label: 'Deploy To', type: 'radio', options: ['Vercel', 'Cloudflare', 'Both'] }
                ]
            },
            {
                id: 't3',
                name: 'Site Analysis',
                icon: 'üìä',
                category: 'analysis',
                description: 'Analyze site performance and security',
                fields: [
                    { name: 'url', label: 'Site URL', type: 'text', placeholder: 'https://...' },
                    { name: 'analysisType', label: 'Analysis Type', type: 'select', options: ['Performance', 'Security', 'SEO', 'All'] }
                ]
            },
            {
                id: 't4',
                name: 'Code Review',
                icon: 'üîç',
                category: 'development',
                description: 'Review code changes and suggest improvements',
                fields: [
                    { name: 'repo', label: 'Repository', type: 'text', placeholder: 'user/repo' },
                    { name: 'branch', label: 'Branch', type: 'text', placeholder: 'main' }
                ]
            }
        ];

        // Components
        function StatusBadge({ status }) {
            const colors = {
                running: 'bg-green-500',
                paused: 'bg-yellow-500',
                completed: 'bg-blue-500',
                failed: 'bg-red-500',
                idle: 'bg-gray-500'
            };
            
            return (
                <div className={`w-3 h-3 rounded-full ${colors[status]} ${status === 'running' ? 'pulse-glow' : ''}`} />
            );
        }

        function SessionCard({ session, onPause, onResume, onStop, onViewLogs, onClick }) {
            const elapsed = Math.floor((Date.now() - session.startedAt) / 1000 / 60);
            
            return (
                <div 
                    className="bg-gray-800 rounded-lg p-4 hover:bg-gray-750 transition-all cursor-pointer border border-gray-700 hover:border-blue-500"
                    onClick={() => onClick(session)}
                >
                    <div className="space-y-3">
                        {/* Header */}
                        <div className="flex items-start justify-between">
                            <div className="flex items-center gap-2">
                                <StatusBadge status={session.status} />
                                <h3 className="font-semibold text-white">{session.name}</h3>
                            </div>
                            <span className="text-xs text-gray-400 uppercase">{session.taskType || 'idle'}</span>
                        </div>
                        
                        {/* Progress */}
                        {session.status === 'running' && (
                            <div>
                                <div className="flex justify-between text-sm mb-1">
                                    <span className="text-gray-400">Progress</span>
                                    <span className="text-blue-400">{session.progress}%</span>
                                </div>
                                <div className="h-2 bg-gray-700 rounded-full overflow-hidden">
                                    <div 
                                        className="h-full bg-blue-500 progress-bar rounded-full"
                                        style={{ width: `${session.progress}%` }}
                                    />
                                </div>
                            </div>
                        )}
                        
                        {/* Status message */}
                        {session.status === 'paused' && (
                            <div className="text-sm text-yellow-400 bg-yellow-500/10 p-2 rounded border border-yellow-500/30">
                                ‚è∏Ô∏è Paused - Waiting for approval
                            </div>
                        )}
                        
                        {session.status === 'idle' && (
                            <div className="text-sm text-gray-500 bg-gray-800 p-2 rounded text-center">
                                Ready for task
                            </div>
                        )}
                        
                        {/* Stats */}
                        {session.status !== 'idle' && (
                            <div className="grid grid-cols-2 gap-2 text-sm text-gray-400">
                                <div>‚è±Ô∏è {elapsed}m elapsed</div>
                                {session.filesProcessed && (
                                    <div>üìÑ {session.filesProcessed} / {session.totalFiles} files</div>
                                )}
                            </div>
                        )}
                        
                        {/* Actions */}
                        <div className="flex gap-2 flex-wrap" onClick={e => e.stopPropagation()}>
                            {session.status === 'running' && (
                                <button 
                                    className="px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-sm transition-colors"
                                    onClick={() => onPause(session.id)}
                                >
                                    ‚è∏Ô∏è Pause
                                </button>
                            )}
                            
                            {session.status === 'paused' && (
                                <button 
                                    className="px-3 py-1 bg-green-600 hover:bg-green-500 rounded text-sm transition-colors"
                                    onClick={() => onResume(session.id)}
                                >
                                    ‚ñ∂Ô∏è Resume
                                </button>
                            )}
                            
                            {session.status !== 'idle' && (
                                <>
                                    <button 
                                        className="px-3 py-1 bg-blue-600 hover:bg-blue-500 rounded text-sm transition-colors"
                                        onClick={() => onViewLogs(session)}
                                    >
                                        üëÅÔ∏è Logs
                                    </button>
                                    <button 
                                        className="px-3 py-1 bg-red-600 hover:bg-red-500 rounded text-sm transition-colors"
                                        onClick={() => onStop(session.id)}
                                    >
                                        ‚èπÔ∏è Stop
                                    </button>
                                </>
                            )}
                            
                            {session.status === 'idle' && (
                                <button 
                                    className="px-3 py-1 bg-green-600 hover:bg-green-500 rounded text-sm transition-colors w-full"
                                    onClick={() => alert('Would open task selector')}
                                >
                                    ‚ú® Start Task
                                </button>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        function ApprovalCard({ approval, onApprove, onReject }) {
            const riskColors = {
                low: 'text-green-400 bg-green-500/10 border-green-500/30',
                medium: 'text-yellow-400 bg-yellow-500/10 border-yellow-500/30',
                high: 'text-red-400 bg-red-500/10 border-red-500/30'
            };
            
            return (
                <div className="bg-gray-800 rounded-lg p-4 border border-yellow-500/50 slide-up">
                    <div className="space-y-3">
                        <div className="flex items-start justify-between">
                            <div>
                                <h4 className="font-semibold text-white flex items-center gap-2">
                                    üîî {approval.sessionName}
                                </h4>
                                <p className="text-sm text-gray-400 mt-1">{approval.action}</p>
                            </div>
                        </div>
                        
                        <div className="bg-gray-900 p-3 rounded font-mono text-sm text-green-400 border border-gray-700">
                            $ {approval.command}
                        </div>
                        
                        <div className="grid grid-cols-2 gap-2 text-sm">
                            <div className="text-gray-400">
                                <span className="font-semibold">Reason:</span> {approval.context.reason}
                            </div>
                            <div className="text-gray-400">
                                <span className="font-semibold">Impact:</span> {approval.context.impact}
                            </div>
                            <div className="text-gray-400">
                                <span className="font-semibold">Files:</span> {approval.context.filesAffected}
                            </div>
                            <div className="text-gray-400">
                                <span className="font-semibold">Est. Time:</span> {approval.context.estimatedTime}
                            </div>
                        </div>
                        
                        <div className={`p-2 rounded border ${riskColors[approval.riskLevel]}`}>
                            Risk Assessment: <span className="font-bold uppercase">{approval.riskLevel}</span>
                        </div>
                        
                        <div className="flex gap-2">
                            <button 
                                className="flex-1 px-4 py-2 bg-green-600 hover:bg-green-500 rounded font-semibold transition-colors"
                                onClick={() => onApprove(approval.id)}
                            >
                                ‚úì Approve & Execute
                            </button>
                            <button 
                                className="flex-1 px-4 py-2 bg-red-600 hover:bg-red-500 rounded font-semibold transition-colors"
                                onClick={() => onReject(approval.id)}
                            >
                                ‚úó Reject
                            </button>
                        </div>
                    </div>
                </div>
            );
        }

        function LogViewer({ session, onClose }) {
            const [logs, setLogs] = useState(session.logs);
            const logsEndRef = useRef(null);
            
            useEffect(() => {
                // Simulate new logs coming in
                const interval = setInterval(() => {
                    if (session.status === 'running') {
                        const newLog = {
                            level: ['info', 'success'][Math.floor(Math.random() * 2)],
                            message: [
                                'Processing file batch...',
                                'Transfer complete for chunk',
                                'Validating integrity...',
                                'Database connection established'
                            ][Math.floor(Math.random() * 4)],
                            time: new Date().toLocaleTimeString()
                        };
                        setLogs(prev => [...prev, newLog]);
                    }
                }, 3000);
                
                return () => clearInterval(interval);
            }, [session.status]);
            
            useEffect(() => {
                logsEndRef.current?.scrollIntoView({ behavior: 'smooth' });
            }, [logs]);
            
            const levelColors = {
                info: 'text-blue-400',
                success: 'text-green-400',
                warn: 'text-yellow-400',
                error: 'text-red-400'
            };
            
            const levelIcons = {
                info: '‚ÑπÔ∏è',
                success: '‚úì',
                warn: '‚ö†Ô∏è',
                error: '‚úó'
            };
            
            return (
                <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4" onClick={onClose}>
                    <div 
                        className="bg-gray-900 rounded-lg max-w-4xl w-full max-h-[80vh] flex flex-col border border-gray-700"
                        onClick={e => e.stopPropagation()}
                    >
                        {/* Header */}
                        <div className="flex items-center justify-between p-4 border-b border-gray-700">
                            <div className="flex items-center gap-3">
                                <StatusBadge status={session.status} />
                                <h3 className="font-bold text-lg text-white">{session.name}</h3>
                                <span className="text-sm text-gray-400">Live Logs</span>
                            </div>
                            <button 
                                onClick={onClose}
                                className="px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded transition-colors"
                            >
                                ‚úï Close
                            </button>
                        </div>
                        
                        {/* Logs */}
                        <div className="flex-1 overflow-auto p-4 bg-gray-950 font-mono text-sm">
                            {logs.map((log, idx) => (
                                <div key={idx} className={`mb-1 log-entry ${levelColors[log.level]}`}>
                                    <span className="text-gray-500">[{log.time}]</span>{' '}
                                    <span>{levelIcons[log.level]}</span>{' '}
                                    {log.message}
                                </div>
                            ))}
                            <div ref={logsEndRef} />
                        </div>
                        
                        {/* Footer */}
                        <div className="p-3 border-t border-gray-700 flex gap-2">
                            <button className="px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-sm transition-colors">
                                üì• Export
                            </button>
                            <button className="px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-sm transition-colors">
                                üóëÔ∏è Clear
                            </button>
                            <button className="px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-sm transition-colors">
                                üîç Search
                            </button>
                            <div className="flex-1"></div>
                            <label className="flex items-center gap-2 text-sm">
                                <input type="checkbox" defaultChecked />
                                Auto-scroll
                            </label>
                        </div>
                    </div>
                </div>
            );
        }

        function TemplateModal({ template, onClose, onSubmit }) {
            const [formData, setFormData] = useState({});
            
            return (
                <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4" onClick={onClose}>
                    <div 
                        className="bg-gray-900 rounded-lg max-w-2xl w-full border border-gray-700 slide-up"
                        onClick={e => e.stopPropagation()}
                    >
                        <div className="p-6 space-y-4">
                            <div className="flex items-center justify-between">
                                <div>
                                    <h3 className="text-2xl font-bold text-white flex items-center gap-2">
                                        {template.icon} {template.name}
                                    </h3>
                                    <p className="text-gray-400 mt-1">{template.description}</p>
                                </div>
                                <button 
                                    onClick={onClose}
                                    className="text-gray-400 hover:text-white"
                                >
                                    ‚úï
                                </button>
                            </div>
                            
                            <div className="space-y-3">
                                {template.fields.map((field, idx) => (
                                    <div key={idx}>
                                        <label className="block text-sm font-medium text-gray-300 mb-1">
                                            {field.label}
                                        </label>
                                        
                                        {field.type === 'text' && (
                                            <input 
                                                type="text"
                                                placeholder={field.placeholder}
                                                className="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded text-white focus:outline-none focus:border-blue-500"
                                                onChange={e => setFormData({...formData, [field.name]: e.target.value})}
                                            />
                                        )}
                                        
                                        {field.type === 'select' && (
                                            <select 
                                                className="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded text-white focus:outline-none focus:border-blue-500"
                                                onChange={e => setFormData({...formData, [field.name]: e.target.value})}
                                            >
                                                <option value="">Select...</option>
                                                {field.options.map((opt, i) => (
                                                    <option key={i} value={opt}>{opt}</option>
                                                ))}
                                            </select>
                                        )}
                                        
                                        {field.type === 'checkbox' && (
                                            <label className="flex items-center gap-2">
                                                <input 
                                                    type="checkbox"
                                                    defaultChecked={field.default}
                                                    onChange={e => setFormData({...formData, [field.name]: e.target.checked})}
                                                />
                                                <span className="text-gray-400">Enable</span>
                                            </label>
                                        )}
                                        
                                        {field.type === 'radio' && (
                                            <div className="space-y-2">
                                                {field.options.map((opt, i) => (
                                                    <label key={i} className="flex items-center gap-2">
                                                        <input 
                                                            type="radio"
                                                            name={field.name}
                                                            value={opt}
                                                            onChange={e => setFormData({...formData, [field.name]: e.target.value})}
                                                        />
                                                        <span className="text-gray-400">{opt}</span>
                                                    </label>
                                                ))}
                                            </div>
                                        )}
                                    </div>
                                ))}
                            </div>
                            
                            <div className="border-t border-gray-700 pt-4 flex gap-2">
                                <button 
                                    className="flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-500 rounded font-semibold transition-colors"
                                    onClick={() => {
                                        onSubmit(template, formData);
                                        onClose();
                                    }}
                                >
                                    üöÄ Start Task
                                </button>
                                <button 
                                    className="px-4 py-3 bg-gray-700 hover:bg-gray-600 rounded transition-colors"
                                    onClick={onClose}
                                >
                                    Cancel
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        function PromptOptimizer({ onClose, onOptimize }) {
            const [prompt, setPrompt] = useState('');
            const [optimizing, setOptimizing] = useState(false);
            const [suggestions, setSuggestions] = useState([]);
            
            const handleOptimize = () => {
                setOptimizing(true);
                
                // Simulate AI optimization
                setTimeout(() => {
                    setSuggestions([
                        {
                            model: 'Claude Sonnet 4',
                            prompt: `${prompt}\n\nPlease provide detailed progress updates at each step, use search and replace operations instead of full file rewrites, and ask for confirmation before any destructive operations.`,
                            score: 92,
                            improvements: ['Added progress tracking', 'Safer file operations', 'User confirmations']
                        },
                        {
                            model: 'Gemini 2.0',
                            prompt: `Context: WordPress migration task\nGoal: ${prompt}\nConstraints: Preserve data integrity, minimal downtime\nOutput format: Structured steps with validation checkpoints`,
                            score: 88,
                            improvements: ['Structured format', 'Added constraints', 'Validation steps']
                        },
                        {
                            model: 'GPT-4',
                            prompt: `You are an expert DevOps engineer. ${prompt}\n\nBreak this into atomic steps, validate each step before proceeding, and provide rollback instructions if something fails.`,
                            score: 85,
                            improvements: ['Expert persona', 'Atomic steps', 'Rollback support']
                        }
                    ]);
                    setOptimizing(false);
                }, 2000);
            };
            
            return (
                <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4" onClick={onClose}>
                    <div 
                        className="bg-gray-900 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-auto border border-gray-700"
                        onClick={e => e.stopPropagation()}
                    >
                        <div className="p-6 space-y-4">
                            <div className="flex items-center justify-between">
                                <div>
                                    <h3 className="text-2xl font-bold text-white flex items-center gap-2">
                                        üß† AI Prompt Optimizer
                                    </h3>
                                    <p className="text-gray-400 mt-1">Optimize your prompt using AI models</p>
                                </div>
                                <button 
                                    onClick={onClose}
                                    className="text-gray-400 hover:text-white"
                                >
                                    ‚úï
                                </button>
                            </div>
                            
                            <div>
                                <label className="block text-sm font-medium text-gray-300 mb-2">
                                    Your Prompt
                                </label>
                                <textarea 
                                    className="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded text-white focus:outline-none focus:border-blue-500 font-mono text-sm"
                                    rows="6"
                                    placeholder="Migrate the WordPress site from GridPane to xCloud..."
                                    value={prompt}
                                    onChange={e => setPrompt(e.target.value)}
                                />
                            </div>
                            
                            <button 
                                className="w-full px-4 py-3 bg-purple-600 hover:bg-purple-500 rounded font-semibold transition-colors disabled:opacity-50"
                                onClick={handleOptimize}
                                disabled={!prompt || optimizing}
                            >
                                {optimizing ? 'üîÑ Optimizing with AI...' : '‚ú® Optimize Prompt'}
                            </button>
                            
                            {suggestions.length > 0 && (
                                <div className="space-y-4">
                                    <h4 className="font-bold text-white">AI Suggestions:</h4>
                                    
                                    {suggestions.map((suggestion, idx) => (
                                        <div key={idx} className="bg-gray-800 p-4 rounded border border-gray-700">
                                            <div className="flex items-center justify-between mb-2">
                                                <div className="flex items-center gap-2">
                                                    <span className="font-semibold text-white">{suggestion.model}</span>
                                                    <span className="px-2 py-1 bg-green-500/20 text-green-400 rounded text-xs font-bold">
                                                        Score: {suggestion.score}
                                                    </span>
                                                </div>
                                                <button 
                                                    className="px-3 py-1 bg-blue-600 hover:bg-blue-500 rounded text-sm transition-colors"
                                                    onClick={() => {
                                                        onOptimize(suggestion.prompt);
                                                        onClose();
                                                    }}
                                                >
                                                    Use This
                                                </button>
                                            </div>
                                            
                                            <div className="bg-gray-900 p-3 rounded font-mono text-xs text-gray-300 mb-2">
                                                {suggestion.prompt}
                                            </div>
                                            
                                            <div className="flex gap-2 flex-wrap">
                                                {suggestion.improvements.map((imp, i) => (
                                                    <span key={i} className="px-2 py-1 bg-blue-500/20 text-blue-400 rounded text-xs">
                                                        ‚úì {imp}
                                                    </span>
                                                ))}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        function FloatingActionButton({ icon, label, onClick, colorClass = 'bg-blue-600 hover:bg-blue-500' }) {
            const [showLabel, setShowLabel] = useState(false);
            
            return (
                <div 
                    className="relative"
                    onMouseEnter={() => setShowLabel(true)}
                    onMouseLeave={() => setShowLabel(false)}
                >
                    <button 
                        className={`fab w-14 h-14 ${colorClass} rounded-full shadow-lg flex items-center justify-center text-2xl transition-all`}
                        onClick={onClick}
                    >
                        {icon}
                    </button>
                    {showLabel && (
                        <div className="absolute right-16 top-1/2 -translate-y-1/2 bg-gray-800 px-3 py-2 rounded shadow-lg whitespace-nowrap text-sm border border-gray-700">
                            {label}
                        </div>
                    )}
                </div>
            );
        }

        function Dashboard() {
            const [sessions, setSessions] = useState(initialSessions);
            const [approvals, setApprovals] = useState(initialApprovals);
            const [selectedSession, setSelectedSession] = useState(null);
            const [showTemplate, setShowTemplate] = useState(null);
            const [showPromptOptimizer, setShowPromptOptimizer] = useState(false);
            
            // Simulate progress updates
            useEffect(() => {
                const interval = setInterval(() => {
                    setSessions(prev => prev.map(s => {
                        if (s.status === 'running' && s.progress < 100) {
                            return { ...s, progress: Math.min(s.progress + Math.random() * 10, 100) };
                        }
                        return s;
                    }));
                }, 2000);
                
                return () => clearInterval(interval);
            }, []);
            
            const handleApprove = (approvalId) => {
                const approval = approvals.find(a => a.id === approvalId);
                setApprovals(prev => prev.filter(a => a.id !== approvalId));
                setSessions(prev => prev.map(s => 
                    s.id === approval.sessionId ? { ...s, status: 'running' } : s
                ));
            };
            
            const handleReject = (approvalId) => {
                const approval = approvals.find(a => a.id === approvalId);
                setApprovals(prev => prev.filter(a => a.id !== approvalId));
                setSessions(prev => prev.map(s => 
                    s.id === approval.sessionId ? { ...s, status: 'idle' } : s
                ));
            };
            
            const handleStartTask = (template, formData) => {
                const newSession = {
                    id: String(sessions.length + 1),
                    name: `${template.name} - ${formData.sourceDomain || formData.project || 'New Task'}`,
                    status: 'running',
                    taskType: template.category,
                    progress: 0,
                    startedAt: new Date(),
                    logs: [
                        { level: 'info', message: `Starting ${template.name}...`, time: new Date().toLocaleTimeString() }
                    ]
                };
                setSessions(prev => [...prev.filter(s => s.status !== 'idle'), newSession]);
            };
            
            return (
                <div className="min-h-screen p-6">
                    {/* Header */}
                    <header className="mb-8">
                        <div className="flex items-center justify-between">
                            <div>
                                <h1 className="text-4xl font-bold text-white mb-2">
                                    üéõÔ∏è Multi-Claude Command Center
                                </h1>
                                <p className="text-gray-400">Manage parallel Claude instances with ease</p>
                            </div>
                            
                            {/* Stats */}
                            <div className="bg-gray-800 rounded-lg p-4 border border-gray-700">
                                <div className="grid grid-cols-3 gap-6 text-sm">
                                    <div>
                                        <div className="text-gray-400">Active</div>
                                        <div className="text-2xl font-bold text-green-400">
                                            {sessions.filter(s => s.status === 'running').length}
                                        </div>
                                    </div>
                                    <div>
                                        <div className="text-gray-400">Pending</div>
                                        <div className="text-2xl font-bold text-yellow-400">
                                            {approvals.length}
                                        </div>
                                    </div>
                                    <div>
                                        <div className="text-gray-400">API Usage</div>
                                        <div className="text-2xl font-bold text-blue-400">$12.35</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </header>
                    
                    {/* Approval Queue */}
                    {approvals.length > 0 && (
                        <section className="mb-8">
                            <h2 className="text-2xl font-bold text-white mb-4 flex items-center gap-2">
                                ‚ö†Ô∏è Pending Approvals
                                <span className="px-2 py-1 bg-yellow-500 text-black rounded-full text-sm">
                                    {approvals.length}
                                </span>
                            </h2>
                            <div className="grid gap-4">
                                {approvals.map(approval => (
                                    <ApprovalCard 
                                        key={approval.id}
                                        approval={approval}
                                        onApprove={handleApprove}
                                        onReject={handleReject}
                                    />
                                ))}
                            </div>
                        </section>
                    )}
                    
                    {/* Quick Templates */}
                    <section className="mb-8">
                        <h2 className="text-2xl font-bold text-white mb-4">‚ö° Quick Start</h2>
                        <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                            {templates.map(template => (
                                <button
                                    key={template.id}
                                    className="bg-gray-800 hover:bg-gray-750 p-4 rounded-lg border border-gray-700 hover:border-blue-500 transition-all text-left"
                                    onClick={() => setShowTemplate(template)}
                                >
                                    <div className="text-3xl mb-2">{template.icon}</div>
                                    <div className="font-semibold text-white">{template.name}</div>
                                    <div className="text-sm text-gray-400 mt-1">{template.description}</div>
                                </button>
                            ))}
                        </div>
                    </section>
                    
                    {/* Active Sessions */}
                    <section>
                        <h2 className="text-2xl font-bold text-white mb-4">ü§ñ Active Sessions</h2>
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
                            {sessions.map(session => (
                                <SessionCard 
                                    key={session.id}
                                    session={session}
                                    onPause={(id) => setSessions(prev => prev.map(s => s.id === id ? {...s, status: 'paused'} : s))}
                                    onResume={(id) => setSessions(prev => prev.map(s => s.id === id ? {...s, status: 'running'} : s))}
                                    onStop={(id) => setSessions(prev => prev.filter(s => s.id !== id))}
                                    onViewLogs={setSelectedSession}
                                    onClick={setSelectedSession}
                                />
                            ))}
                        </div>
                    </section>
                    
                    {/* Floating Action Buttons */}
                    <div className="fixed right-6 bottom-6 flex flex-col gap-3">
                        <FloatingActionButton 
                            icon="üß†"
                            label="AI Prompt Optimizer"
                            colorClass="bg-purple-600 hover:bg-purple-500"
                            onClick={() => setShowPromptOptimizer(true)}
                        />
                        <FloatingActionButton 
                            icon="‚ûï"
                            label="New Session"
                            colorClass="bg-green-600 hover:bg-green-500"
                            onClick={() => setShowTemplate(templates[0])}
                        />
                        <FloatingActionButton 
                            icon="üìä"
                            label="Analytics"
                            colorClass="bg-blue-600 hover:bg-blue-500"
                            onClick={() => alert('Would show analytics dashboard')}
                        />
                        <FloatingActionButton 
                            icon="‚öôÔ∏è"
                            label="Settings"
                            colorClass="bg-gray-600 hover:bg-gray-500"
                            onClick={() => alert('Would open settings')}
                        />
                    </div>
                    
                    {/* Modals */}
                    {selectedSession && (
                        <LogViewer 
                            session={selectedSession}
                            onClose={() => setSelectedSession(null)}
                        />
                    )}
                    
                    {showTemplate && (
                        <TemplateModal 
                            template={showTemplate}
                            onClose={() => setShowTemplate(null)}
                            onSubmit={handleStartTask}
                        />
                    )}
                    
                    {showPromptOptimizer && (
                        <PromptOptimizer 
                            onClose={() => setShowPromptOptimizer(false)}
                            onOptimize={(prompt) => console.log('Optimized:', prompt)}
                        />
                    )}
                </div>
            );
        }

        ReactDOM.render(
            <React.StrictMode>
                <Dashboard />
            </React.StrictMode>, 
            document.getElementById('root')
        );
    </script>
    <script>
        // Error handling
        window.addEventListener('error', (e) => {
            console.error('Global error:', e.error);
            document.getElementById('root').innerHTML = `
                <div style="padding: 2rem; color: white; background: #1f2937; min-height: 100vh;">
                    <h1 style="color: #ef4444; font-size: 2rem; margin-bottom: 1rem;">Error Loading Dashboard</h1>
                    <p style="color: #9ca3af; margin-bottom: 1rem;">There was an error loading the Multi-Claude Command Center.</p>
                    <pre style="background: #111827; padding: 1rem; border-radius: 0.5rem; overflow: auto; color: #fca5a5;">
${e.error?.stack || e.error?.message || 'Unknown error'}
                    </pre>
                    <p style="color: #9ca3af; margin-top: 1rem;">Please check the browser console for more details.</p>
                </div>
            `;
        });
    </script>
</body>
</html>